
<p><a href="#heading1">NAME</a><br/>
<a href="#heading2">SYNOPSIS</a><br/>
<a href="#heading3">AVAILABILITY</a><br/>
<a href="#heading4">DESCRIPTION</a><br/>
<a href="#heading5">OPTIONS</a><br/>
<a href="#heading6">EXAMPLES</a><br/>
<a href="#heading7">BUGS</a><br/>
<a href="#heading8">FILES</a><br/>
<a href="#heading9">SEE ALSO</a><br/>
<a href="#heading10">AUTHOR</a><br/>

</p>
<hr/>


<h2 id="heading1">NAME
</h2>


<p style="margin-left:11%;margin-left:11%; margin-top: 1em"><b><a href="./scripts.php?script=archive">archive</a></b>
- selectively <a href="./scripts.php?script=archive">archive</a>s and deletes old files on a remote
host</p>

<h2 id="heading2">SYNOPSIS
</h2>


<p style="margin-left:11%;margin-left:11%; margin-top: 1em"><b><a href="./scripts.php?script=archive">archive</a></b>
[<b>-c</b><i>&lt;config&gt;</i>] [<b>-d</b>] [<b>-l</b>]
[<b>-v</b>] [<b>-z</b>] <i>&lt;host_name&gt;</i>
|<b>-V</i>

<h2 id="heading3">AVAILABILITY
</h2>


<p style="margin-left:11%;margin-left:11%; margin-top: 1em"><b><a href="./scripts.php?script=archive">archive</a></b>
is a Bourne shell script which should work equally well on
all versions of UNIX and Linux.</p>

<h2 id="heading4">DESCRIPTION
</h2>


<p style="margin-left:11%;margin-left:11%; margin-top: 1em"><b><a href="./scripts.php?script=archive">archive</a></b>
creates a full backup of local or remote systems using
<i>tar</i> or <i>lftp&rsquo;s mirror</i> command.</p>

<h2 id="heading5">OPTIONS
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">











<p style="margin-left:11%;margin-top: 1em"><b>-c</i>




<p style="margin-left:11%;margin-top: 1em"><i>&lt;config_file&gt;</i>




<p style="margin-left:11%;margin-left:18%;">The default <i>configuration
file</i> is <b>/usr/local/etc/<a href="./scripts.php?script=archive.cf">archive.cf</a></b>. An alternative
configuration file may be set with the <b>-c</b> option on
the command line.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">










<p style="margin-left:11%;margin-top: 1em"><b>-d</i>




<p style="margin-left:11%;margin-top: 1em">sets the script to debug mode
(ie. runs with the shell option -x)</p>





<p><b>-l</i>




<p>turns on logging using the <b>syslog</b> facility. This
is particularly useful where statistics are being compiled
for presentation to the client, see <i>report</i>.</p>





<p><b>-v</i>




<p>Sets the script to verbose mode. Each significant action
will be reported on standard out.</p>





<p><b>-z</i>




<p>Use <i>gzip</i> to compress the tar file and append
<i>.gz</i> to the <a href="./scripts.php?script=archive">archive</a> filename. The <b>-z</b> option is
meaningless when a remote system is being <a href="./scripts.php?script=archive">archive</a>d as the
<i>tar</i> file is always compressed prior to transmission
across the network.</p>





<p><b>-V</i>




<p>prints version details to standard out and exits.</p>


<h2 id="heading6">EXAMPLES
</h2>


<pre style="margin-left:11%; margin-top: 1em">5 0 * * * su fulford -c &quot;/usr/local/etc/<a href="./scripts.php?script=archive">archive</a> -l albert&quot;</pre>


<p style="margin-left:11%;margin-left:11%; margin-top: 1em">The above is an
extract from a root <b>crontab</b> file and illustrates the
typical use of the script in practice. All the local file
systems on the host &quot;albert&quot; will be backed up to
device (or file) nominated in the default configuration file
<i>/usr/local/etc/<a href="./scripts.php?script=archive.cf">archive.cf</a></i>. Initiation and completion
of the script will be logged using the <i>syslog</i>
facility.</p>

<p style="margin-left:11%;margin-left:11%; margin-top: 1em">Note that the
script is executed with an ordinary user id. This is to
facilitate remote access where root logins are denied.
<b>Sudo</b> is used within the script where root access is
required.</p>

<p style="margin-left:11%;margin-left:11%; margin-top: 1em"><b>NB</b>. The
hostname <i>albert</i> is being resolved locally and does
not require a fully qualified domain.</p>

<h2 id="heading7">BUGS
</h2>


<p style="margin-left:11%;margin-left:11%; margin-top: 1em">The script is
quite crude and has little or no error checking.</p>

<h2 id="heading8">FILES
</h2>



<p style="margin-left:11%; margin-top: 1em"><i><a href="./scripts.php?script=archive.cf">archive.cf</a></i>.</p>

<h2 id="heading9">SEE ALSO
</h2>


<p style="margin-left:11%; margin-top: 1em"><a href="./scripts.php?script=clean&amp;man=y">clean</a>,
<a href="./scripts.php?script=ftchbkup&amp;man=y">ftchbkup</a>, <a href="./scripts.php?script=plbkup&amp;man=y">plbkup</a>.</p>

<h2 id="heading10">AUTHOR
</h2>


<p style="margin-left:11%; margin-top: 1em">Clifford W
Fulford, <a href="http://www.citylinux.com"
title="Go to the City Linux homepage">
City Linux
</a>. Contact fulford@citylinux.com or +44
(0)793 572 8612.</p>
<hr/>
