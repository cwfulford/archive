<h2 id="heading1">NAME</h2>
<p class="indent">
<b>archive</b>
- selectively archives and deletes old files on a remote host
.SH SYNOPSIS

<b>archive</b>
 [
<b>-c</b>
.I &lt;config&gt;
] [
<b>-d</b>
] [
<b>-l</b>
] [
<b>-v</b>
]
[
<b>-z</b>
]

.I &lt;host_name&gt;

|
<b>-V</b>

<br/>
.SH AVAILABILITY
<b>archive</b>
is a Bourne shell script which should work equally well on all versions of UNIX
and Linux.
.SH DESCRIPTION
<b>archive</b>
creates a full backup of local or remote systems using 
.I tar
 or

.I lftp's mirror
 command.
.SH OPTIONS
.TP 5
<b>-c </b>
.I &lt;config_file&gt;
<br/>
The default 
.I configuration file
 is 
<b>/usr/local/etc/archive.cf</b>
. An 
alternative configuration file may be set with the 
<b>-c</b>
 option on the 
command line.
.TP
<b>-d </b>
sets the script to debug mode (ie. runs with the shell option -x)
.TP 5
<b>-l</b>
turns on logging using the 
<b>syslog</b>
facility. This is particularly useful where statistics are being compiled
for presentation to the client, see 
.IR report .
.TP 5
<b>-v </b>
Sets the script to verbose mode. Each significant action will be reported
on standard out.
.TP 5
<b>-z</b>
Use 
.I gzip
 to compress the tar file and  append 
.I .gz

to the archive filename. The 
<b>-z</b>
 option is meaningless when a remote
system is being archived as the 
.I tar
 file is always compressed prior
to transmission across the network.
.TP 5
<b>-V</b>
prints version details to standard out and exits.
.SH EXAMPLES
.ft CW
5 0 * * * su fulford -c "/usr/local/etc/archive -l albert"
.ft R
.LP
The above is an extract from a root 
<b>crontab </b>
file and illustrates the typical use of the script in practice. All the
local file systems on the host "albert" will be backed up to device (or
file) nominated in the default configuration file 

.I /usr/local/etc/archive.cf
. Initiation and completion of the script
will be logged using the 
.I syslog
 facility.
.LP
Note that the script is executed with an ordinary user id. This is to
facilitate remote access where root logins are denied.
<b>Sudo </b>
is used within the script where root access is required.
.LP
<b>NB.</b>
The hostname 
.I albert
is being resolved locally and does not require a fully qualified domain.
.SH BUGS
The script is quite crude and has little or no error checking.
.SH FILES
.IR archive.cf .
.SH SEE ALSO
.IR clean ,
.IR ftchbkup ,
.IR plbkup .
.SH AUTHOR
Clifford W Fulford, City Linux. Contact fulford@citylinux.com or +44 (0)793 572 8612.
