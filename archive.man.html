<h2 id="heading1">NAME</h2>
<p class="indent">
<b><a href="./scripts.php?script=archive">archive</a></b>
- selectively archives and deletes old files on a remote host
</p>
<h2 id="heading2">SYNOPSIS</h2>
<p class="indent">

<b><a href="./scripts.php?script=archive">archive</a></b>
 [
<b>-c</b>
<i>&lt;config&gt;</i>
] [
<b>-d</b>
] [
<b>-l</b>
] [
<b>-v</b>
]
[
<b>-z</b>
]

<i>&lt;host_name&gt;</i>

|
<b>-V</b>

<br/>
</p>
<h2 id="heading3">AVAILABILITY</h2>
<p class="indent">
<b><a href="./scripts.php?script=archive">archive</a></b>
is a Bourne shell script which should work equally well on all versions of UNIX
and Linux.
</p>
<h2 id="heading4">DESCRIPTION</h2>
<p class="indent">
<b><a href="./scripts.php?script=archive">archive</a></b>
creates a full backup of local or remote systems using 
<i>tar</i>
 or

<i>lftp's mirror</i>
 command.
</p>
<h2 id="heading5">OPTIONS</h2>
<p class="indent">
</p>
<p class="indent">
<b>-c </b>
<i>&lt;config_file&gt;</i>
<br/>
The default 
<i>configuration file</i>
 is 
<b>/usr/local/etc/<a href="./scripts.php?script=archive.cf">archive.cf</a></b>
. An 
alternative configuration file may be set with the 
<b>-c</b>&nbsp;&nbsp;&nbsp;
 option on the 
command line.
</p>
<p class="indent">
<b>-d </b>
sets the script to debug mode (ie. runs with the shell option -x)
</p>
<p class="indent">
<b>-l</b>&nbsp;&nbsp;&nbsp;
turns on logging using the 
<b>syslog</b>
facility. This is particularly useful where statistics are being compiled
for presentation to the client, see 
<i>report</i>.
</p>
<p class="indent">
<b>-v </b>
Sets the script to verbose mode. Each significant action will be reported
on standard out.
</p>
<p class="indent">
<b>-z</b>&nbsp;&nbsp;&nbsp;
Use 
<i>gzip</i>
 to compress the tar file and  append 
<i>.gz</i>

to the <a href="./scripts.php?script=archive">archive</a> filename. The 
<b>-z</b>&nbsp;&nbsp;&nbsp;
 option is meaningless when a remote
system is being <a href="./scripts.php?script=archive">archive</a>d as the 
<i>tar</i>
 file is always compressed prior
to transmission across the network.
</p>
<p class="indent">
<b>-V</b>&nbsp;&nbsp;&nbsp;
prints version details to standard out and exits.
</p>
<h2 id="heading6">EXAMPLES</h2>
<p class="indent">
</p><div class="cmdline">
<pre>
5 0 * * * su fulford -c "/usr/local/etc/<a href="./scripts.php?script=archive">archive</a> -l albert"
</pre></div>
<p class="indent">
</p>
<p class="indent">
The above is an extract from a root 
<b>crontab </b>
file and illustrates the typical use of the script in practice. All the
local file systems on the host "albert" will be backed up to device (or
file) nominated in the default configuration file 

<i>/usr/local/etc/<a href="./scripts.php?script=archive.cf">archive.cf</a></i>
. Initiation and completion of the script
will be logged using the 
<i>syslog</i>
 facility.
</p>
<p class="indent">
Note that the script is executed with an ordinary user id. This is to
facilitate remote access where root logins are denied.
<b>Sudo </b>
is used within the script where root access is required.
</p>
<p class="indent">
<b>NB.</b>
The hostname 
<i>albert</i>
is being resolved locally and does not require a fully qualified domain.
</p>
<h2 id="heading8">BUGS</h2>
<p class="indent">
The script is quite crude and has little or no error checking.
</p>
<h2 id="heading7">FILES</h2>
<p class="indent">
<i><a href="./scripts.php?script=archive.cf">archive.cf</a></i>.
</p>
<h2 id="heading9">SEE ALSO</h2>
<p class="indent">
<i>clean</i>,
<i>ftchbkup</i>,
<i>plbkup</i>.
</p>
<h2 id="heading10">AUTHOR</h2>
<p class="indent">
Clifford W Fulford, City Linux. Contact fulford@citylinux.com or +44 (0)793 572 8612.
</p>
	
